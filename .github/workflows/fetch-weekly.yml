name: Weekly dataset updates
on:
  workflow_dispatch: # allow manual triggering
  schedule:
    - cron: "0 0 * * 0"  # Every Sunday at midnight

jobs:
  update_dateset:
    strategy:
      matrix:
        datasource:
          - agentmodels
          - aiimpacts
          - aipulse
          - aisafety.camp
          - ai_alignment_playlist
          - ai_explained
          - ai_safety_talks
          - ai_safety_reading_group
          - ai_tech_tu_delft
          - alignment_newsletter
          - arbital
          - arxiv
          - carado.moe
          - cold_takes
          - deepmind_blog
          - deepmind_technical_blog
          - distill
          - eaforum
          - ebooks
          - eleuther.ai
          - gdocs
          - gdrive_ebooks
          - generative.ink
          - gwern_blog
          - html_articles
          - importai
          - jsteinhardt_blog
          - markdown
          - miri
          - ml_safety_newsletter
          - nonarxiv_papers
          - qualiacomputing
          - openai.research
          - pdfs
          - reports
          - rob_miles_ai_safety
          - vkrakovna_blog
          - yudkowsky_blog

    uses: ./.github/workflows/fetch-dataset.yml
    with:
      datasource: ${{ matrix.datasource }}
      coda_token: ${{ inputs.coda_token }}
      youtube_api_key: ${{ inputs.youtube_api_key }}
      db_user: ${{ inputs.db_user }}
      db_password: ${{ inputs.db_password }}
      db_host: ${{ inputs.db_host }}
    secrets: inherit
